import datetime
# Sistema para Casa de cambio

# Declaracion de variables_0

programa = int
fecha = str
compra_tdc = 1
venta_tdc = 0
dolares_caja = float
pesos_caja = float

#Start
bandera = True
while bandera == True:
    try:
        programa = int(input("¿Deseas utilizar el sistema?\n1]Sí\n2]No"))
        if programa == 1:
            fecha = datetime.datetime.now()
            bandera = True
            while bandera == True:
                try:
                    numero_empleado = int(input("Introduce el numero de empleado"))
                    bandera = False
                    if numero_empleado <= 0:
                        bandera = True
                        print("*Captura un numero de empleado valido*")
                except ValueError:
                    print("*Captura un numero de empleado valido*")

            while compra_tdc > venta_tdc or compra_tdc == venta_tdc:
                bandera = True
                while bandera == True:
                    try:
                        compra_tdc = float(input("Introduce el tipo de cambio de Compra"))
                        bandera = False
                        if compra_tdc <= 0:
                            bandera = True
                            print("*Captura un monto valido*")
                    except ValueError:
                        print("*Captura un tipo de cambio valido*")

                bandera = True
                while bandera == True:
                    try:
                        venta_tdc = float(input("Introduce el tipo de cambio de Venta"))
                        bandera = False
                        if venta_tdc <= 0:
                            bandera = True
                            print("*Captura un monto valido*")
                    except ValueError:
                        print("*Captura un tipo de cambio valido*")
                if compra_tdc > venta_tdc:
                    print("*El valor de compra debe ser menor que el de venta*")
                elif compra_tdc == venta_tdc:
                    print("*El valor de venta debe ser mayor que el de compra*")

            bandera = True
            while bandera == True:
                try:
                    dolares_caja = float(input("Introduce la cantidad de Dolares en caja"))
                    bandera = False
                    if dolares_caja <= 0:
                        bandera = True
                        print("*Captura un monto valido*")
                except ValueError:
                    print("*Captura un monto valido*")

            bandera = True
            while bandera == True:
                try:
                    pesos_caja = float(input("Introduce la cantidad de Pesos en caja"))
                    bandera = False
                    if pesos_caja <= 0:
                        bandera = True
                        print("*Captura un monto valido*")
                except ValueError:
                    print("*Captura un monto valido*")

        elif programa == 2:
            print("Vuelva pronto")
            exit()
        else: print("Introduce una opcion valida")
    except ValueError:
        print("*Captura una opcion valida*")

# Declaracion de variables_1
pedir = float
dar = float

# Metodos
def compra():
    global fecha, compra_tdc, venta_tdc, dolares_caja, pesos_caja, pedir, dar
    bandera = True
    while bandera == True:
        try:
            pedir = float(input("Introduce la cantidad de dolares a comprar "))
            bandera = False
            if pedir <= 0:
                bandera = True
                print("*Captura un monto valido*")
        except ValueError:
            print("*Introduce un monto valido*")
    dar= pedir * compra_tdc
    if dar <= pesos_caja:
        print(f"Pide ${pedir} dolares al cliente y entrega ${dar} pesos.")
        dolares_caja += pedir
        pesos_caja -= dar
    else:
        print("No hay fondos suficientes")

def venta():
    global fecha, compra_tdc, venta_tdc, dolares_caja, pesos_caja, pedir, dar
    bandera = True
    while bandera == True:
        try:
            dar = float(input("Introduce la cantidad de dolares a vender "))
            bandera = False
            if dar <= 0:
                bandera = True
                print("*Captura un monto valido*")
        except ValueError:
            print("*Introduce un monto valido*")
    pedir = dar * venta_tdc
    if dar <= dolares_caja:
        print(f"Pide ${pedir} pesos al cliente y entrega ${dar} dolares.")
        dolares_caja -= dar
        pesos_caja += pedir
    else:
        print("No hay fondos suficientes")

def consultar_efectivo():
    print(f"Efectivo en caja\nDolares: ${dolares_caja}\nPesos: ${pesos_caja}")

def actualizar_tc():
    global compra_tdc,venta_tdc
    compra_tdc = 1
    venta_tdc = 0
    while compra_tdc > venta_tdc or compra_tdc == venta_tdc:
        bandera = True
        while bandera == True:
            try:
                compra_tdc = float(input("Introduce el tipo de cambio de Compra"))
                bandera = False
                if compra_tdc <= 0:
                    bandera = True
                    print("*Captura un monto valido*")
            except ValueError:
                print("*Captura un tipo de cambio valido*")

        bandera = True
        while bandera == True:
            try:
                venta_tdc = float(input("Introduce el tipo de cambio de Venta"))
                bandera = False
                if venta_tdc <= 0:
                    bandera = True
                    print("*Captura un monto valido*")
            except ValueError:
                print("*Captura un tipo de cambio valido*")
        if compra_tdc > venta_tdc:
            print("*El valor de compra debe ser menor que el de venta*")
        elif compra_tdc == venta_tdc:
            print("*El valor de venta debe ser mayor que el de compra*")

def actualizar_no_emp():
    bandera = True
    while bandera == True:
        try:
            numero_empleado = int(input("Introduce el numero de empleado"))
            bandera = False
            if numero_empleado <= 0:
                bandera = True
                print("*Captura un numero de empleado valido*")
        except ValueError:
            print("*Captura un numero de empleado valido*")

def bitacora():
    print("a")

def reporte_ventas():
    print("test b")

def consultar_tc():
    print(f"Compra: {compra_tdc}\nVenta: {venta_tdc}")

# Menu
menu = int
while menu != 6:
    bandera = True
    while bandera == True:
        try:
            menu = int(input("Menu\n1]Compra\n2]Venta\n3]Consultar tipo de cambio\n4]Actualizar tipo de cambio\n5]Más opciones\n6]Salir"))
            bandera = False
        except ValueError:
            print("Captura una opcion valida")
    if menu == 1:
        compra()
    elif menu == 2:
        venta()
    elif menu == 3:
        consultar_tc()
    elif menu == 4:
        actualizar_tc()
    elif menu == 5:
        menu_2 = True
        while menu_2 == True:
            bandera = True
            while bandera == True:
                try:
                    menu_2 = int(input("Menu\n1]Consultar efectivo en caja\n2]Bitacora de movimientos\n3]Reporte de ventas\n4]Actualizar numero de empleado\n5]Salir"))
                    bandera = False
                except ValueError:
                    print("*Captura una opcion valida*")
            if menu_2 == 1:
                consultar_efectivo()
                menu_2 = True
            elif menu_2 == 2:
                bitacora()
                menu_2 = True
            elif menu_2 == 3:
                reporte_ventas()
                menu_2 = True
            elif menu_2 == 4:
                actualizar_no_emp()
                menu_2 = True
            elif menu_2 == 5:
                menu_2 = False
                print("Volviendo al menu principal")
            else:
                print("Introduce una opcion valida")

    elif menu == 6:
        print("Gracias por utilizar el sistema")
    else:
        print("Introduce una opcion valida")
